# How to put your generator into ProcGenZine?

(Disclaimer: This text, like the whole project, is very much a work in progress.)

ProcGenZine aims to be a framework for procedurally generating a zine about procedurally generated content, generative art and all the various weird things that are happening in that space. The way it tries to do this is by allowing interested people to write self-contained generators that can then be plugged into ProcGenZine to produce content that will then end up as one or more page of the resulting zine. 

This document aims to show how to do that.

## Step 0: What is a generator?

In python-speak, ProcGenZine generators are classes that adhere to certain conventions:

* The class itself is in a file somewhere in ProcGenZines `generators`folder, is imported in `generators/__init__.py`and added to the `all_generators` list.
* They take a seed value and a file path as their arguments when instantiated.
* They have a method called `generate` which produces, at the very least, some string, preferably html-formated.


The reason this is important is because ProcGenZine, when ittries to build a zine, will import the `all_generators` list, try to instantiate each class in that list with the current seed value and file location and then run the resulting objects `generate` method to get the text to put in the zines pages. 

If generators break the conventions mentioned above, code breaks, exceptions fly and whatever cool output your generator tries to produce will not end up in the zine, which would be a shame.

Now, maybe you can code your generator from scratch to adhere to these conventions and in that case more power to you. But for everybody else who does not wanto ro reinvent the wheel, there is a `DefaultGenerator` class in [generators/default.py](generators/default.py). This generator is not terribly interesting by itself, but you can have your generator inherit from this base class to get all the necessary scaffolding and thus concentrate on the fun part: **Writing code to produce cool stuff.**

## Step 1: Writing your own generator.

Let's say we have an idea for a generator: AllYourBaseGen, a generator that produces variations of the ["All your base" meme]( LINK ).

Looking at the conventions above, we know that we need to write a class, put that in a specific file somewhere and so on. So let's start with the file. Let's call it `allyourbase.py` and put it in the `generators` folder.

```bash
cd generators
touch allyourbase.py
```

So, we have our file and it's in the right place. Now, we can start writing code. Open up the file we just generated in the editor or IDE of your choice. Because we wanto to hurry to the fun part, lets reuse the DefaultGenerator class and have our generator inherit from it:

```python
# to be used, the DefaultGenerator has to be inherited
from default import DefaultGenerator

# Now, we create our class which inherit from it.
class AllYourBaseGen(DefaultGenerator):
    pass
```

For now, our class doesn't actually do something, **but** because we inherited some stuff from DefaultGenerator, we can already do something with our class! Let's save our file and then open up a python shell to play around with it.

```
>>> from allyourbase import AllYourBaseGen
>>> test = AllYourBaseGen(".", "seed value")
>>> test.generate()
"DefaultValue"
```

As you can see, because we inherited from Default generator, our AllYourBaseGen already produces stuff, has a generate method and so on, even though we didn't write a thing yet!

To allow you to concentrate on writing interesting things, DefaultGenerator and its child classes come with a couple of things built in:

```python
class DefaultGenerator:
    def __init__(self, filetarget, seed=None):
        self.dir = filetarget

        self.random = random.Random()
        if seed:
            self.random.seed(seed)

    def generate(self):
return "DefaultValue"
```

It has an `__init__` method which takes two arguments:

* `filetarget`, the path to the temporary directory where you can put any files (like CSS or images) generated by our code.
* `seed`, which is a string used to initialize your generators random generator. (To make make the whole ProcGenZine deterministic.)

These can be used in your code by using the `self.dir` and `self.random` attributed, respectfully and we will have examples of that later on.

DefaultGenerator also has a `generate` method which simply returns the string "DefaultValue" for now, which is why AllYourBaseGen also just returned that. To make it do something more interesting, we have to define our own `generate` method.

So we open our editor again and edit allyourbase.py again:

```python

from default import DefaultGenerator

class AllYourBaseGen(DefaultGenerator):

    def generate(self):
        """Here does the magic happen!"""
        pass
```

If we save that and try the python shell again, we see this: 

```
>>> from allyourbase import AllYourBaseGen
>>> test = AllYourBaseGen(".", "seed value")
>>> test.generate()
>>>
```

Because our generate method just passes, it doesn't return anything, so let's change that:

```
    def generate(self):
        """Here does the magic happen!"""
        
        return "All your base are belong to us!"
```

If we run the code in the python shell again, we get "All your base are belong to us!" back. Nice, it works, but it's not terribly *generative* yet. It doesn't produce anything new.  
Let's change that.


```

class AllYourBaseGen(DefaultGenerator):

    def generate(self):
        """Here does the magic happen!"""
        
        # First let's take a string template as a base
        all_your_x = "All your {x} are belong to us!"
        
        # Then, let's thing of other things that could 'are belong to us'
        # So here's a list of things that could fit into our formula
        things = ["base", "cat", "cake", "hope", "hair", "bed"]
        
        # Now, let's pick one of those randomly, using our seeded random module
        
        pick = self.random.choice(things)     
        
        # And at last, we modify the return value to put the thing in the formula
        return all_your_x.format(x=pick)
```

We save the file, start pur python shell again and generate things again: 

```
>>> test = AllYourBaseGen(".", "seef")

>>> test.generate()
<<< 'All your hair are belong to us!'

>>> test.generate()
<<< 'All your base are belong to us!'

>>> test.generate()
<<< 'All your bed are belong to us!'
```

